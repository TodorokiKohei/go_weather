# Fluentdのバッファリング
[参考文献](https://zenn.dev/taisho6339/articles/b309562b0d4973)

## buffer
Fluentdではsourceのデータをバッファリングしてまとめて送信する機能が用意されている。
* データ出力の効率化
* 送信先ダウン時の一時保存

バッファはOutput Pluginごとにバッファ領域を持ち、「stage」と「queue」の2つのフェーズがある。  
Fluendはsourceからのログを「stage」に書き込み、一定サイズもしくは一定間隔で「enqueue」する。  

### チャンク(chnck)
ログはユーザーが指定した基準でグルーピングされてチャンクに書き込まれる。指定方法は以下のようなものがある。
* タグ  
    指定されたタグ毎にチャンクを作成する
* 時刻  
    時刻区切りでチャンクを作成する
* キー  
    データのキーを基準にチャンクを作成する

チャンクが一定サイズに達するとエンキューするなどをパラメータで指定できる。バッファ、チャンク、キューなどのサイズもパラメータで設定することができる。

### flush
フラッシュはチャンクをエンキューするタイミングをパラメータで指定できる。